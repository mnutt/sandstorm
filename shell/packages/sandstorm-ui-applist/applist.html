<template name="sandstormAppList">
  {{#if isSignedUpOrDemo}}
  <div class="app-list">
    <h1>Apps</h1>
    <div class="search-row {{#unless actionsCount}}hide{{/unless}}">
      <img title="Search" class="search-icon" src="/search.svg"><input class="search-bar" type="text" placeholder="search" value="{{ searchText }}" />
    </div>
    <div class="popular-container {{#if searching }}hide{{/if}} {{#unless myGrainsCount}}hide{{/unless}}">
      <h2 class="">Most used</h2>
      {{#each popularActions }}
      <button class="app-button app-action {{#if searching}}hide{{/if}}">
        <div class="app-icon" style="background-image: url('{{ iconSrc }}');"></div>
        <span class="app-title">{{appTitle}}</span>
        <span class="action-text">New {{noun}}</span>
      </button>
      {{/each}}
    </div>
    <h2 class="{{#if searching}}hide{{/if}} {{#unless actionsCount}}hide{{/unless}} all-apps">All apps</h2>
    <a class="app-button install-button {{#if searching}}hide{{/if}}" href="https://apps.sandstorm.io/?host={{ origin }}">
      <div class="app-icon pseudoapp install-icon"></div>
      <span class="action-title">Install...</span>
      <span class="action-text">from App Market</span>
    </a>
    <button class="app-button upload-button {{#if searching}}hide{{/if}}">
      <div class="app-icon pseudoapp upload-icon"></div>
      <span class="action-title">Upload app...</span>
      <span class="action-text">choose SPK file</span>
    </button>
    <button class="app-button restore-button {{#if searching}}hide{{/if}}">
      <div class="app-icon pseudoapp restore-icon"></div>
      <span class="action-title">Restore backup...</span>
      <span class="action-text">choose ZIP file</span>
    </button>
    {{#each devActions }}
    <button class="app-button dev-action {{#if searching}}hide{{/if}}">
      <div class="app-icon" style="background-image: url('{{ iconSrc }}');"></div>
      <span class="app-title">{{appTitle}}</span>
      <span class="action-text">New {{noun}}</span>
    </button>
    {{/each}}
    {{#each actions }}
    {{!-- data-app-id is only used for testing purposes --}}
    <button class="app-button app-action {{#if shouldHighlight}}highlight{{/if}}"
            data-app-id="{{appId}}">
      <div class="app-icon" style="background-image: url('{{ iconSrc }}');"></div>
      <span class="app-title">{{appTitle}}</span>
      <span class="action-text">New {{noun}}</span>
    </button>
    {{/each}}
  </div>
  {{else}}
    {{#if Template.subscriptionsReady}}
      <div class="not-signed-up">
        <h1>Unauthorized! :(</h1>
        <p>This is a private Sandstorm server. In order to install apps, you need to be invited
          by the admin. The admin can create invites in the admin settings panel.</p>
      </div>
    {{/if}}
  {{/if}}
</template>
